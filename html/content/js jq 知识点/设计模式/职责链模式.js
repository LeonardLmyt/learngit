/*
    职责链模式的定义是：使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间
	的耦合关系，将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。
	职责链模式的名字非常形象，一系列可能会处理请求的对象被连接成一条链，请求在这些对
	象之间依次传递，直到遇到一个可以处理它的对象，我们把这些对象称为链中的节点
*/

var img = new Image();
img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAakAAACQCAIAAAA9TAPdAAAgAElEQVR4Ae3defxtU/kH8J9ozhTCzXBlSjJHGUIoFKJUKJHSROWGlG4pRclQlyhDhl6lFJkLoTQg060MIaVuXDOFNNLv7T799u/rfKdzzt7nnL2/32f/cV7rrL32Ws/zWWt/9vOsca7//Oc//5NXIpAIJAKTDIGnTTJ9U91EIBFIBJ5EILkv20EikAhMRgSS+yZjrafOiUAikNyXbSARSAQmIwLJfZOx1lPnRCARSO7LNpAIJAKTEYHkvslY66lzIpAIJPdlG0gEEoHJiEBy32Ss9dQ5EUgEkvuyDSQCicBkRCC5bzLWeuqcCCQCyX3ZBhKBRGAyIjBP5UqX3xzh3//+N6me9rQneTlyE3PzzTffeOONt9566+9///sHHnjg8ccff/jhh//1r39FmkUWWUTMfPPNt9hii02dOnXZZZddY401llxyybnmmkv83HPPLZ8nnnji6U9/euX6ZoaJQCIwEAS83WXKnas8VbUUXz5DJIX4cBayO++883784x/jvmWWWWb55Zd/wQtesPTSS88777zzzDOPgqIsvx4BhGR//vOf77jjjlmzZt1222333HPPlClTXvnKV26zzTYelAAJtkibfxOBRKChCExA7mPNnX/++Z/73Ofuv//+nXfeeeONN2bQicSGDDcK//3vf8di+NEv1sN9IgXCxCsQwY+zZ88+99xzzz777A033HD69OmrrbZaQ6s5xU4EEoEWBIo3vSW+zb+Dt/vCwyUuTR566KHTTjvt+9///vzzz7/55puvsMIKyA6jlVTyr3/96zXXXHPppZcusMACu+22G0sQLaJOdCnQJlKZLBFIBGqFQElaGDz3oTY0hJ5OPPHEb3zjGxtttNGWW27J0PvHP/6B+MKrLalkZKLa7rrrrh/+8Ie//vWv99lnny222EK52QNYq9acwiQC7SNQkhZqwX0zZ87cYYcd1lxzTZQUthjie/azny3M1S3fSYf70BxMBVDtY489tvfeezMqZ8yYsfjii7ePdaZMBBKB+iDQVO4rhmiPPfbYc845B/etssoqfYMVq1544YUXXXTRAQccoD8x6BWUyLE81fZNiywoEZjMCDSV+7DPlVdeue+++6699tqID+MUnml/qlNx+PeQQw5ZaKGFDjrooBe+8IX+6v4r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';

document.body.appendChild(img);

/*
    定义一个构造函数Chain，在new Chain 的时候传
    递的参数即为需要被包装的函数， 同时它还拥有一个实例属性this.successor，表示在链中的下
    一个节点。
*/

// Chain.prototype.setNextSuccessor 指定在链中的下一个节点
// Chain.prototype.passRequest 传递请求给某个节点
var Chain = function (fn) {
    this.fn = fn;
    this.successor = null;
};
Chain.prototype.setNextSuccessor = function (successor) {
    return this.successor = successor;
};
Chain.prototype.passRequest = function () {
    var ret = this.fn.apply(this, arguments);
    if (ret === 'nextSuccessor') {
        return this.successor && this.successor.passRequest.apply(this.successor, arguments);
    }
    return ret;
};

//给Chain 类再增加一个原型方法Chain.prototype.next，表示手动传递请求给职责链中的下一个节点：
Chain.prototype.next = function () {
    return this.successor && this.successor.passRequest.apply(this.successor, arguments);
};
//来看一个异步职责链的例子：
var fn1 = new Chain(function () {
    console.log(1);
    return 'nextSuccessor';
});
var fn2 = new Chain(function () {
    console.log(2);
    var self = this;
    setTimeout(function () {
        self.next();
    }, 1000);
});
var fn3 = new Chain(function () {
    console.log(3);
});
fn1.setNextSuccessor(fn2).setNextSuccessor(fn3);
fn1.passRequest();