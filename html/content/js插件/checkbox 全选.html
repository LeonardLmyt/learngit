<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="测试demo" name="Keywords">
    <meta content="测试demo" name="Description">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=320,initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <title>测试demo</title>
    <script src="../../js/jquery-1.8.3.min.js" type="text/javascript"></script>
</head>
<body>
    <div class="">
        全选 <input type="checkbox" id="maincheckbox" />
    </div>
    <div>
        <input type="checkbox" class="subcheckbox" />
        <input type="checkbox" class="subcheckbox" />
        <input type="checkbox" class="subcheckbox" />
        <input type="checkbox" class="subcheckbox" />
    </div>
    <script>
        (function () {
            var ms = new Object() || {};
            ms.publicm1 = function checkboxKj(IdMain,ClassSub){
                $("#"+IdMain +",."+ClassSub+"").click(function (e) {
                    var e = e || window.event;
                    var target = e.target || e.srcElement;
                    if (target.id != "") {
                        if ($("#" + IdMain + "").is(":checked")) {
                            $("." + ClassSub + "").prop("checked", true);
                        }
                        else {
                            $("." + ClassSub + "").removeAttr("checked");
                        }
                    }
                    else {
                        if ($("." + ClassSub + "").size() == $("." + ClassSub + ":checked").size())
                            $("#" + IdMain + "").prop("checked", true);
                        else {
                            $("#" + IdMain + "").removeAttr("checked");
                        }
                    }
                })
            } 
            ms.publicm1("maincheckbox","subcheckbox");
        })();
    </script>
</body>
</html>